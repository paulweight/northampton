/**
 * Custom Responsive Carousel
 * 
 * Based on original code by:
 * ! (c) Mat Marquis (@wilto). MIT License. http://wil.to/3a
 */
(function(b,l){var m=0;b.fn.getPercentage=function(){return this.attr("style").match(/margin\-left:(.*[0-9])/i)&&parseInt(RegExp.$1)};b.fn.adjRounding=function(k){var a=b(this),k=a.find(k),a=a.parent().width()-k.eq(0).width();if(0!==a){b(k).css("position","relative");for(var i=0;i<k.length;i++)k.eq(i).css("left",a*i+"px")}return this};b.fn.carousel=function(k){if(!this.data("carousel-initialized")){this.data("carousel-initialized",!0);var a=b.extend({slider:".slider",slide:".slide",prevSlide:null,
nextSlide:null,slideHed:null,addPagination:!1,addNav:k!=l&&(k.prevSlide||k.nextSlide)?!1:!0,namespace:"carousel",speed:300,rotate:!1,startSlide:1,lazy:!1},k),i=this,g=document.body||document.documentElement,f=!1,j={init:function(){m++;i.each(function(d){var e=b(this),c=e.find(a.slider),h=e.find(a.slide),o=h.length,n="margin-left "+a.speed/1E3+"s ease",f="carousel-"+m+"-"+d,g=1>a.startSlide?1:a.startSlide>o?o:parseInt(a.startSlide);1>=h.length||(e.css({overflow:"hidden",width:"100%"}).attr("role",
"application"),c.attr("id",c[0].id||"carousel-"+m+"-"+d).css({marginLeft:-(100*(g-1))+"%","float":"left",width:100*o+"%","-webkit-transition":n,"-moz-transition":n,"-ms-transition":n,"-o-transition":n,transition:n}).bind("carouselmove",j.move).bind("nextprev",j.nextPrev).bind("navstate",j.navState).bind("loadimages",j.loadImages),h.css({"float":"left",width:100/o+"%"}).each(function(c){var d=b(this);d.attr({role:"tabpanel document",id:f+"-slide"+c});a.addPagination&&d.attr("aria-labelledby",f+"-tab"+
c)}),a.addPagination&&j.addPagination(),a.addNav&&j.addNav(),c.trigger("navstate",{current:-(100*(g-1))}),!1==a.lazy&&c.trigger("loadimages"))})},loadImages:function(){!0!=f&&($images=b(this).find(a.slide+" img"),$images.each(function(d){b(this).removeClass("lazy");title=b(this).attr("title");d!=a.startSlide-1&&"undefined"!==typeof title&&(b(this).hide(),img=title.replace("Image: ",""),b(this).removeAttr("title").attr("src",img).fadeIn(a.lazyFadeDuration))}),f=!0)},addNav:function(){i.each(function(){var d=
b(this),e=d.find(a.slider),c=d.find(a.slide).length,c=1>a.startSlide?1:a.startSlide>c?c:parseInt(a.startSlide),e=e[c-1].id,e=['<ul class="slidecontrols" role="navigation">','\t<li role="presentation"><a href="#'+e+'" class="'+a.namespace+'-next">Next</a></li>','\t<li role="presentation"><a href="#'+e+'" class="'+a.namespace+'-prev">Prev</a></li>',"</ul>"].join("");a=b.extend(a,{nextSlide:"."+a.namespace+"-next",prevSlide:"."+a.namespace+"-prev"});d.prepend(e)})},addPagination:function(){i.each(function(d){var e=
b(this),c=b('<ol class="'+a.namespace+'-tabs" role="tablist navigation" />');e.find(a.slider);var h=e.find(a.slide);slideNum=h.length;for(associated="carousel-"+m+"-"+d;slideNum--;)d=h.eq(slideNum).find(a.slideHed).text()||"Page "+(slideNum+1),d=['<li role="presentation">','<a href="#'+associated+"-slide"+slideNum+'"',' aria-controls="'+associated+"-slide"+slideNum+'"',' id="'+associated+"-tab"+slideNum+'" role="tab">'+d+"</a>","</li>"].join(""),c.prepend(d);c.appendTo(e).find("li").keydown(function(a){var c=
b(this),d=c.prev().find("a"),c=c.next().find("a");switch(a.which){case 37:case 38:d.length&&d.trigger("click").focus();a.preventDefault();break;case 39:case 40:c.length&&c.trigger("click").focus(),a.preventDefault()}}).find("a").click(function(c){var d=b(this);"false"==d.attr("aria-selected")&&(d=-(100*d.parent().index()),e.find(a.slider).trigger("carouselmove",{moveTo:d}));c.preventDefault()})})},roundDown:function(a){a=parseInt(a,10);return 100*Math.ceil((a-a%100)/100)},navState:function(d,e){var c=
b(this),h=c.find(a.slide),f=-(e.current/100),g=h.eq(f);c.attr("aria-activedescendant",g[0].id);g.addClass(a.namespace+"-active-slide").attr("aria-hidden",!1).siblings().removeClass(a.namespace+"-active-slide").attr("aria-hidden",!0);if(a.prevSlide||a.nextSlide)c=b('[href*="#'+this.id+'"]'),c.removeClass(a.namespace+"-disabled"),0==f?c.filter(a.prevSlide).addClass(a.namespace+"-disabled"):f==h.length-1&&c.filter(a.nextSlide).addClass(a.namespace+"-disabled");a.addPagination&&(h=g.attr("aria-labelledby"),
h=b("#"+h),h.parent().addClass(a.namespace+"-active-tab").siblings().removeClass(a.namespace+"-active-tab").find("a").attr({"aria-selected":!1,tabindex:-1}),h.attr({"aria-selected":!0,tabindex:0}))},move:function(d,e){var c=b(this);c.trigger("loadimages").trigger(a.namespace+"-beforemove").trigger("navstate",{current:e.moveTo});g.setAttribute("style","transition:top 1s ease;-webkit-transition:top 1s ease;-moz-transition:top 1s ease;");if(g.style.transition||g.style.webkitTransition||g.style.msTransition||
g.style.OTransition||g.style.MozTransition)c.adjRounding(a.slide).css("marginLeft",e.moveTo+"%").one("transitionend webkitTransitionEnd OTransitionEnd",function(){b(this).trigger(a.namespace+"-aftermove")});else c.adjRounding(a.slide).animate({marginLeft:e.moveTo+"%"},{duration:a.speed,queue:!1},function(){b(this).trigger(a.namespace+"-aftermove")})},nextPrev:function(d,e){var c=b(this),h=c?c.getPercentage():0,f=c.find(a.slide),g="prev"===e.dir?0!=h:-h<100*(f.length-1),f=100*-(f.length-1),i=b('[href="#'+
this.id+'"]');if(!c.is(":animated")&&g)switch(h="prev"===e.dir?0!=h%100?j.roundDown(h):h+100:0!=h%100?j.roundDown(h)-100:h-100,c.trigger("carouselmove",{moveTo:h}),i.removeClass(a.namespace+"-disabled").removeAttr("aria-disabled"),h){case f:i.filter(a.nextSlide).addClass(a.namespace+"-disabled").attr("aria-disabled",!0);break;case 0:i.filter(a.prevSlide).addClass(a.namespace+"-disabled").attr("aria-disabled",!0)}else h=a.rotate&&"next"===e.dir?0:a.rotate&&"prev"===e.dir?f:j.roundDown(h),c.trigger("carouselmove",
{moveTo:h})}};j.init(this);b(a.nextSlide+","+a.prevSlide).bind("click",function(d){var e=b(this),c=this.hash,h=e.is(a.prevSlide)?"prev":"next",c=b(c);if(e.is("."+a.namespace+"-disabled"))return!1;c.trigger("nextprev",{dir:h});d.preventDefault()}).bind("keydown",function(a){b(this);var e=this.hash;switch(a.which){case 37:case 38:b("#"+e).trigger("nextprev",{dir:"next"});a.preventDefault();break;case 39:case 40:b("#"+e).trigger("nextprev",{dir:"prev"}),a.preventDefault()}});i.bind("dragSnap",{wrap:this,
slider:a.slider},function(d,e){b(this).find(a.slider).trigger("nextprev",{dir:"left"===e.direction?"next":"prev"})});i.filter("[data-autorotate]").each(function(){var d,e=b(this),c=e.attr("data-autorotate"),h=e.find(a.slide).length,f=e.find(a.slider),g=function(){clearInterval(d);d=setInterval(function(){i();f.trigger("nextprev",{dir:"next"})},c)},i=function(){if(a.rotate)g();else switch(-(b(a.slider).getPercentage()/100)+1){case h:clearInterval(d);d=setInterval(function(){i();f.trigger("nextprev",
{dir:"prev"})},c);break;default:g()}};d=setInterval(i,c);e.attr("aria-live","polite").bind("mouseenter click touchstart",function(){clearInterval(d)});e.attr("aria-live","polite").bind("mouseleave",function(){d=setInterval(i,c)})});return this}}})(jQuery);
$.event.special.dragSnap={setup:function(b){var l=$(this),m=function(a,b){var g=b?"margin-left 0.3s ease":"none";a.css({"-webkit-transition":g,"-moz-transition":g,"-ms-transition":g,"-o-transition":g,transition:g})},k=function(a){a=parseInt(a,10);return 100*Math.ceil((a-a%100)/100)};l.bind("snapback",function(a,b){var g=b.target,f=void 0!=g.attr("style")?g.getPercentage():0,f=!1===b.left?k(f)-100:k(f),j=document.body;m(g,!0);j.setAttribute("style","transition:top 1s ease;-webkit-transition:top 1s ease;-moz-transition:top 1s ease;");
j.style.transition||j.style.webkitTransition||j.style.MozTransition?g.css("marginLeft",f+"%"):g.animate({marginLeft:f+"%"},opt.speed)}).bind("touchstart",function(a){function i(a){var b=a.originalEvent.touches?a.originalEvent.touches[0]:a;j={time:(new Date).getTime(),coords:[b.pageX,b.pageY]};deltaX=Math.abs(f.coords[0]-b.pageX);deltaY=Math.abs(f.coords[1]-b.pageY);left=e+100*((j.coords[0]-f.coords[0])/f.origin.width());if(f&&!(15>deltaX||0>=e&&0<left))d.trigger("loadimages"),15<=deltaX&&(f.interacting=
!0,d.css({"margin-left":left+"%"}),a.preventDefault())}var g=a.originalEvent.touches?a.originalEvent.touches[0]:a,f={time:(new Date).getTime(),coords:[g.pageX,g.pageY],origin:$(a.target).closest(b.wrap),interacting:!1},j,d=$(a.target).closest(b.slider),e=void 0!=d.attr("style")?d.getPercentage():0;m(d,!1);l.bind("gesturestart",function(){l.unbind("touchmove",i).unbind("touchend",i)}).bind("touchmove",i).one("touchend",function(a){l.unbind("touchmove",i);m(d,!0);if(f&&j){var b=Math.abs(f.coords[0]-
j.coords[0]),e=Math.abs(f.coords[1]-j.coords[1]),g=f.coords[0]>j.coords[0];if(20<b&&b>e)a.preventDefault();else{f.interacting&&l.trigger("snapback",{target:d,left:g});return}a=f.origin.width()/4;-b>a||b>a?f.origin.trigger("dragSnap",{direction:g?"left":"right"}):l.trigger("snapback",{target:d,left:g})}f=j=void 0})})}};
$(document).ready(function(){$(".slidewrap").carousel({slider:".slider",slide:".slide",slideHed:".slidehed",nextSlide:".next",prevSlide:".prev",addPagination:!0,addNav:!1,speed:600,rotate:!0,startSlide:1,lazy:!0})});