(function(b,c){var a=0;b.fn.getPercentage=function(){var d=this.attr("style").match(/margin\-left:(.*[0-9])/i)&&parseInt(RegExp.$1);return d};b.fn.adjRounding=function(d){var f=b(this),h=f.find(d),g=f.parent().width()-h.eq(0).width();if(g!==0){b(h).css("position","relative");for(var e=0;e<h.length;e++){}}return this};b.fn.transitionSupport=function(){dBody=(document.body||document.documentElement);dBody.setAttribute("style","transition:top 1s ease;-webkit-transition:top 1s ease;-moz-transition:top 1s ease;");return !!(dBody.style.transition||dBody.style.webkitTransition||dBody.style.msTransition||dBody.style.OTransition||dBody.style.MozTransition)};b.fn.carousel=function(f){if(this.data("carousel-initialized")){return}this.data("carousel-initialized",true);var j={slider:".slider",slide:".slide",prevSlide:null,nextSlide:null,slideHed:null,addPagination:false,addNav:(f!=c&&(f.prevSlide||f.nextSlide))?false:true,namespace:"carousel",speed:300,rotate:false,startSlide:1,lazy:false,lazyFadeDuration:300,autoRotate:false},g=b.extend(j,f),h=this,e=false,i={init:function(){a++;h.each(function(q){var k=b(this),p=k.find(g.slider),n=k.find(g.slide),m=n.length,o="margin-left "+(g.speed/1000)+"s ease",l="carousel-"+a+"-"+q,r=g.startSlide<1?1:g.startSlide>m?m:parseInt(g.startSlide);if(n.length<=1){return}k.css({overflow:"hidden",width:"100%"}).attr("role","application");p.attr("id",(p[0].id||"carousel-"+a+"-"+q)).css({marginLeft:-(100*(r-1))+"%","float":"left",width:100*m+"%","-webkit-transition":o,"-moz-transition":o,"-ms-transition":o,"-o-transition":o,transition:o}).bind("carouselmove",i.move).bind("nextprev",i.nextPrev).bind("navstate",i.navState).bind("loadimages",i.loadImages);n.css({"float":"left",width:(100/m)+"%"}).each(function(t){var s=b(this);s.attr({role:"tabpanel document",id:l+"-slide"+t});if(g.addPagination){s.attr("aria-labelledby",l+"-tab"+t)}});g.addPagination&&i.addPagination();g.addNav&&i.addNav();p.trigger("navstate",{current:-(100*(r-1))});if(g.lazy==false){p.trigger("loadimages")}})},loadImages:function(){if(e==true){return}var l=b(this),k=l.find(g.slide+" img");k.each(function(m){b(this).removeClass("lazy");title=b(this).attr("title");if(m!=g.startSlide-1&&typeof title!=="undefined"){b(this).hide();img=title.replace("Image: ","");b(this).removeAttr("title").attr("src",img).fadeIn(g.lazyFadeDuration)}});e=true},addNav:function(){h.each(function(p){var l=b(this),r=l.find(g.slider),o=l.find(g.slide),q=o.length,m=g.startSlide<1?1:g.startSlide>q?q:parseInt(g.startSlide),s=r[m-1].id,n=['<ul class="slidecontrols" role="navigation">','	<li role="presentation"><a href="#'+s+'" class="'+g.namespace+'-next">Next</a></li>','	<li role="presentation"><a href="#'+s+'" class="'+g.namespace+'-prev">Prev</a></li>',"</ul>"].join(""),k={nextSlide:"."+g.namespace+"-next",prevSlide:"."+g.namespace+"-prev"};g=b.extend(g,k);l.prepend(n)})},addPagination:function(){h.each(function(n){var o=b(this),k=b('<ol class="'+g.namespace+'-tabs" role="tablist navigation" />'),r=o.find(g.slide),m=r.length,p="carousel-"+a+"-"+n;while(m--){var l=r.eq(m).find(g.slideHed).text()||"Page "+(m+1),q=['<li role="presentation">','<a href="#'+p+"-slide"+m+'"',' aria-controls="'+p+"-slide"+m+'"',' id="'+p+"-tab"+m+'" role="tab">'+l+"</a>","</li>"].join("");k.prepend(q)}k.appendTo(o).find("li").keydown(function(v){var t=b(this),u=t.prev().find("a"),s=t.next().find("a");switch(v.which){case 37:case 38:u.length&&u.trigger("click").focus();v.preventDefault();break;case 39:case 40:s.length&&s.trigger("click").focus();v.preventDefault();break}}).find("a").click(function(v){var t=b(this);if(t.attr("aria-selected")=="false"){var u=t.parent().index(),s=-(100*(u)),w=o.find(g.slider);w.trigger("carouselmove",{moveTo:s})}v.preventDefault()})})},roundDown:function(k){var l=parseInt(k,10);return Math.ceil((l-(l%100))/100)*100},navState:function(n,q){var s=b(this),o=s.find(g.slide),m=-(q.current/100),p=o.eq(m);s.attr("aria-activedescendant",p[0].id);p.addClass(g.namespace+"-active-slide").attr("aria-hidden",false).siblings().removeClass(g.namespace+"-active-slide").attr("aria-hidden",true);if((!!g.prevSlide||!!g.nextSlide)){var l=b('[href*="#'+this.id+'"]');l.removeClass(g.namespace+"-disabled");if(m==0){l.filter(g.prevSlide).addClass(g.namespace+"-disabled")}else{if(m==o.length-1){l.filter(g.nextSlide).addClass(g.namespace+"-disabled")}}}if(!!g.addPagination){var k=p.attr("aria-labelledby"),r=b("#"+k);r.parent().addClass(g.namespace+"-active-tab").siblings().removeClass(g.namespace+"-active-tab").find("a").attr({"aria-selected":false,tabindex:-1});r.attr({"aria-selected":true,tabindex:0})}},move:function(m,l){var k=b(this);k.trigger("loadimages").trigger(g.namespace+"-beforemove").trigger("navstate",{current:l.moveTo});if(k.transitionSupport()){k.adjRounding(g.slide).css("marginLeft",l.moveTo+"%").one("transitionend webkitTransitionEnd OTransitionEnd",function(){b(this).trigger(g.namespace+"-aftermove")})}else{k.adjRounding(g.slide).animate({marginLeft:l.moveTo+"%"},{duration:g.speed,queue:false},function(){b(this).trigger(g.namespace+"-aftermove")})}},nextPrev:function(p,r){var s=b(this),m=(s)?s.getPercentage():0,n=s.find(g.slide),q=r.dir==="prev"?m!=0:-m<(n.length-1)*100,k=-(n.length-1)*100,l=b('[href="#'+this.id+'"]');if(!s.is(":animated")&&q){if(r.dir==="prev"){m=(m%100!=0)?i.roundDown(m):m+100}else{m=((m%100)!=0)?i.roundDown(m)-100:m-100}s.trigger("carouselmove",{moveTo:m});l.removeClass(g.namespace+"-disabled").removeAttr("aria-disabled");switch(m){case (k):l.filter(g.nextSlide).addClass(g.namespace+"-disabled").attr("aria-disabled",true);break;case 0:l.filter(g.prevSlide).addClass(g.namespace+"-disabled").attr("aria-disabled",true);break}}else{var o=(g.rotate&&r.dir==="next")?0:((g.rotate&&r.dir==="prev")?k:i.roundDown(m));s.trigger("carouselmove",{moveTo:o})}}};i.init(this);b(g.nextSlide+","+g.prevSlide).bind("click",function(n){var l=b(this),m=this.hash,k=(l.is(g.prevSlide))?"prev":"next",o=b(m);if(l.is("."+g.namespace+"-disabled")){return false}o.trigger("nextprev",{dir:k});n.preventDefault()}).bind("keydown",function(l){var k=this.hash;switch(l.which){case 37:case 38:b("#"+k).trigger("nextprev",{dir:"next"});l.preventDefault();break;case 39:case 40:b("#"+k).trigger("nextprev",{dir:"prev"});l.preventDefault();break}});var d={wrap:this,slider:g.slider};h.bind("dragSnap",d,function(m,l){var n=b(this).find(g.slider),k=(l.direction==="left")?"next":"prev";n.trigger("nextprev",{dir:k})});h.each(function(){var q,m=b(this),n=parseInt(g.autoRotate,10)>parseInt(g.speed)?parseInt(g.autoRotate,10):5000,o=m.find(g.slide).length,p=m.find(g.slider),k=function(){clearInterval(q);q=setInterval(function(){l();p.trigger("nextprev",{dir:"next"})},n)},l=function(){if(g.rotate){k()}else{var r=-(b(g.slider).getPercentage()/100)+1;switch(r){case o:clearInterval(q);q=setInterval(function(){l();p.trigger("nextprev",{dir:"prev"})},n);break;default:k();break}}};if(g.autoRotate==false){return}q=setInterval(l,n);m.attr("aria-live","polite").bind("mouseenter click touchstart",function(){clearInterval(q)});m.attr("aria-live","polite").bind("mouseleave",function(){q=setInterval(l,n)})});return this}})(jQuery);$.event.special.dragSnap={setup:function(b){var c=$(this),a=function(f,g){var h=0.3,i=(g)?"margin-left "+h+"s ease":"none";f.css({"-webkit-transition":i,"-moz-transition":i,"-ms-transition":i,"-o-transition":i,transition:i})},d=function(f){var f=parseInt(f,10);return Math.ceil((f-(f%100))/100)*100},e=function(j,h){var g=h.target,f=(g.attr("style")!=undefined)?g.getPercentage():0,i=(h.left===false)?d(f)-100:d(f);a(g,true);if(g.transitionSupport()){g.css("marginLeft",i+"%")}else{g.animate({marginLeft:i+"%"},opt.speed)}};c.bind("snapback",e).bind("touchstart",function(k){var j=k.originalEvent.touches?k.originalEvent.touches[0]:k,l={time:((new Date).getTime()),coords:[j.pageX,j.pageY],origin:$(k.target).closest(b.wrap),interacting:false},g,i=$(k.target).closest(b.slider),f=(i.attr("style")!=undefined)?i.getPercentage():0;a(i,false);function h(n){var m=n.originalEvent.touches?n.originalEvent.touches[0]:n;g={time:(new Date()).getTime(),coords:[m.pageX,m.pageY]},deltaX=Math.abs(l.coords[0]-m.pageX),deltaY=Math.abs(l.coords[1]-m.pageY),left=(f+(((g.coords[0]-l.coords[0])/l.origin.width())*100));if(!l||deltaX<15||f<=0&&left>0){return}i.trigger("loadimages");if(deltaX>=15){l.interacting=true;i.css({"margin-left":left+"%"});n.preventDefault()}else{return}}c.bind("gesturestart",function(m){c.unbind("touchmove",h).unbind("touchend",h)}).bind("touchmove",h).one("touchend",function(q){c.unbind("touchmove",h);a(i,true);if(l&&g){var n=Math.abs(l.coords[0]-g.coords[0]),m=Math.abs(l.coords[1]-g.coords[1]),p=l.coords[0]>g.coords[0],o;if(n>20&&(n>m)){q.preventDefault()}else{if(l.interacting){c.trigger("snapback",{target:i,left:p})}return}o=l.origin.width()/4;if(-n>o||n>o){l.origin.trigger("dragSnap",{direction:p?"left":"right"})}else{c.trigger("snapback",{target:i,left:p})}}l=g=undefined})})}};$(document).ready(function(){$(".slidewrap").carousel({slider:".slider",slide:".slide",slideHed:".slidehed",nextSlide:".next",prevSlide:".prev",addPagination:true,addNav:false,speed:600,rotate:true,startSlide:1,lazy:true,lazyFadeDuration:100,autoRotate:6000})});
